{% extends "base.html" %}

{% block title %}EMERGENCY ACCESS - LCARS{% endblock %}

{% block breadcrumb %}
<span class="lcars-breadcrumb-item">EMERGENCY OPERATIONS</span>
<span class="lcars-breadcrumb-separator">‚ñ∂</span>
<span class="lcars-breadcrumb-item">RAPID ACCESS DASHBOARD</span>
{% endblock %}

{% block content %}
<div class="lcars-emergency-dashboard">
    <div class="lcars-emergency-alert">
        <div class="lcars-alert-header">
            <span class="lcars-status-critical">üö®</span>
            <h1>EMERGENCY ACCESS MODE</h1>
            <span class="lcars-status-critical">üö®</span>
        </div>
        <div class="lcars-alert-subtitle">
            Rapid Documentation Access for System Breakdowns & Repairs
        </div>
    </div>

    <!-- Ultra-Fast Search -->
    <div class="lcars-rapid-search">
        <form action="{{ url_for('search') }}" method="GET" class="lcars-rapid-form">
            <input type="text" name="q" placeholder="DESCRIBE PROBLEM OR ENTER COMPONENT NAME..." 
                   class="lcars-rapid-input" autofocus autocomplete="off">
            <button type="submit" class="lcars-rapid-button">FIND SOLUTION</button>
        </form>
        <div class="lcars-search-hints">
            <strong>Quick hints:</strong> "pressure not working" | "relay stuck" | "safety error" | "pins" | "commands"
        </div>
    </div>

    <!-- Critical Systems Grid -->
    <div class="lcars-critical-grid">
        {% for category, docs in critical_docs.items() %}
        <div class="lcars-critical-panel">
            <div class="lcars-panel-title">{{ category }}</div>
            <div class="lcars-panel-docs">
                {% for doc in docs %}
                <a href="{{ url_for('view_document', doc_path=doc.url_safe_name) }}" class="lcars-critical-button">
                    <div class="lcars-button-icon">
                        {% if 'ERROR' in doc.filename.upper() %}üö®
                        {% elif 'SAFETY' in doc.filename.upper() or 'MILL_LAMP' in doc.filename.upper() %}‚ö†Ô∏è
                        {% elif 'PIN' in doc.filename.upper() or 'HARDWARE' in doc.filename.upper() %}üîß
                        {% elif 'TEST' in doc.filename.upper() %}üß™
                        {% elif 'PRESSURE' in doc.filename.upper() %}üìà
                        {% elif 'COMMAND' in doc.filename.upper() %}‚å®Ô∏è
                        {% elif 'SETUP' in doc.filename.upper() %}‚öôÔ∏è
                        {% else %}üìã
                        {% endif %}
                    </div>
                    <div class="lcars-button-content">
                        <div class="lcars-button-name">{{ doc.name }}</div>
                        <div class="lcars-button-preview">{{ doc.content_preview[:60] }}...</div>
                    </div>
                </a>
                {% endfor %}
            </div>
        </div>
        {% endfor %}
    </div>

    <!-- Quick Actions Bar -->
    <div class="lcars-quick-actions">
        <div class="lcars-actions-title">RAPID ACTIONS</div>
        <div class="lcars-actions-grid">
            <a href="{{ url_for('index') }}" class="lcars-action-btn">
                üè† Main Dashboard
            </a>
            <a href="{{ url_for('search') }}" class="lcars-action-btn">
                üîç Full Search
            </a>
            <a href="{{ url_for('system_status') }}" class="lcars-action-btn">
                üìä System Status
            </a>
            <a href="/doc/README" class="lcars-action-btn">
                üìñ Overview
            </a>
            <a href="/doc/COMPREHENSIVE_REVIEW" class="lcars-action-btn">
                üìã Full Review
            </a>
            <a href="javascript:window.print()" class="lcars-action-btn">
                üñ®Ô∏è Print Page
            </a>
        </div>
    </div>
</div>

<style>
.lcars-emergency-dashboard {
    max-width: 1200px;
    margin: 0 auto;
}

.lcars-emergency-alert {
    background: linear-gradient(135deg, rgba(255, 68, 68, 0.2), rgba(255, 136, 136, 0.1));
    border: 2px solid #ff4444;
    border-radius: 15px;
    padding: 20px;
    text-align: center;
    margin-bottom: 25px;
    animation: lcars-pulse-critical 2s infinite;
}

.lcars-alert-header {
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 20px;
    margin-bottom: 10px;
}

.lcars-alert-header h1 {
    color: #ff6666;
    font-size: 28px;
    font-weight: 900;
    margin: 0;
    text-shadow: 0 0 10px rgba(255, 102, 102, 0.5);
}

.lcars-alert-subtitle {
    color: #ffaa44;
    font-size: 16px;
    font-weight: 600;
}

.lcars-rapid-search {
    background: rgba(255, 170, 68, 0.1);
    border: 2px solid #ffaa44;
    border-radius: 10px;
    padding: 20px;
    margin-bottom: 25px;
}

.lcars-rapid-form {
    display: flex;
    gap: 15px;
    margin-bottom: 10px;
}

.lcars-rapid-input {
    flex: 1;
    padding: 15px 20px;
    font-size: 16px;
    background: rgba(0, 0, 0, 0.5);
    border: 1px solid #66aaff;
    border-radius: 8px;
    color: #ffffff;
    font-family: 'Orbitron', monospace;
}

.lcars-rapid-input::placeholder {
    color: #cccccc;
}

.lcars-rapid-button {
    padding: 15px 30px;
    background: linear-gradient(45deg, #ff6666, #ffaa44);
    color: #000000;
    border: none;
    border-radius: 8px;
    font-weight: 900;
    font-size: 16px;
    cursor: pointer;
    transition: all 0.3s ease;
}

.lcars-rapid-button:hover {
    background: linear-gradient(45deg, #ff8888, #ffcc66);
    transform: translateY(-2px);
}

.lcars-search-hints {
    color: #cccccc;
    font-size: 14px;
    text-align: center;
}

.lcars-critical-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
    gap: 20px;
    margin-bottom: 25px;
}

.lcars-critical-panel {
    background: rgba(102, 170, 255, 0.1);
    border: 1px solid #66aaff;
    border-radius: 10px;
    padding: 15px;
}

.lcars-panel-title {
    background: linear-gradient(90deg, #66aaff, #99ccff);
    color: #000000;
    font-weight: 900;
    padding: 8px 15px;
    border-radius: 15px;
    margin-bottom: 15px;
    text-align: center;
    font-size: 14px;
}

.lcars-panel-docs {
    display: grid;
    gap: 10px;
}

.lcars-critical-button {
    display: flex;
    align-items: center;
    gap: 15px;
    padding: 12px 15px;
    background: rgba(255, 204, 68, 0.1);
    border: 1px solid #ffcc44;
    border-radius: 8px;
    text-decoration: none;
    color: inherit;
    transition: all 0.3s ease;
}

.lcars-critical-button:hover {
    background: rgba(255, 204, 68, 0.2);
    border-color: #ffaa44;
    transform: translateX(5px);
}

.lcars-button-icon {
    font-size: 20px;
    flex-shrink: 0;
}

.lcars-button-content {
    flex: 1;
    min-width: 0;
}

.lcars-button-name {
    color: #ffcc44;
    font-weight: 700;
    font-size: 14px;
    margin-bottom: 3px;
}

.lcars-button-preview {
    color: #cccccc;
    font-size: 12px;
    line-height: 1.3;
    overflow: hidden;
    text-overflow: ellipsis;
    white-space: nowrap;
}

.lcars-quick-actions {
    background: rgba(153, 204, 255, 0.1);
    border: 1px solid #99ccff;
    border-radius: 10px;
    padding: 20px;
}

.lcars-actions-title {
    color: #99ccff;
    font-weight: 700;
    font-size: 18px;
    margin-bottom: 15px;
    text-align: center;
}

.lcars-actions-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
    gap: 10px;
}

.lcars-action-btn {
    display: block;
    padding: 10px;
    background: linear-gradient(135deg, #66aaff, #99ccff);
    color: #000000;
    text-decoration: none;
    border-radius: 6px;
    text-align: center;
    font-weight: 600;
    font-size: 14px;
    transition: all 0.3s ease;
}

.lcars-action-btn:hover {
    background: linear-gradient(135deg, #99ccff, #ccddff);
    transform: translateY(-2px);
}
</style>
{% endblock %}